{
    "zabbix_export": {
        "version": "6.0",
        "date": "2023-10-14T12:44:58Z",
        "groups": [
            {
                "uuid": "756d97bb256b458094d71ee0c547804e",
                "name": "Production"
            },
            {
                "uuid": "6771a206416040f98e9c7059885e982e",
                "name": "PVE LXC"
            },
            {
                "uuid": "3cdd708e74354c74af5de0d69635648b",
                "name": "PVE Node"
            },
            {
                "uuid": "36d5230d3b8e40f2a4c4eeb35f9d74c1",
                "name": "PVE Qemu"
            },
            {
                "uuid": "7df96b18c230490a9a0a9e2307226338",
                "name": "Templates"
            }
        ],
        "templates": [
            {
                "uuid": "8b735b851b6a4174a12f8ec4add50d47",
                "template": "Template pve api datacenter",
                "name": "Template pve api datacenter",
                "description": "This template monitors a Proxmox system. It requires access to port 8006 either from the zabbix server or from a zabbix proxy. It will not work through a zabbix agent.\nThe template requires a Proxmox API key for access to the Proxmox API. The values should be set in the following macro's:\n{$PVESERVER} : Server to talk to for the API\n{$PVETOKENID} : API token ID\n{$PVESECRET} : API secret",
                "templates": [
                    {
                        "name": "Template pve api settings"
                    }
                ],
                "groups": [
                    {
                        "name": "Production"
                    },
                    {
                        "name": "Templates"
                    }
                ],
                "items": [
                    {
                        "uuid": "ff57547ef91049cc9b51d9ba88ec500a",
                        "name": "Cluster nodes",
                        "type": "DEPENDENT",
                        "key": "pveapi.datacenter.clusternodes",
                        "delay": "0",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.type == \"node\")].length()"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.datacenter.master.resources"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Datacenter"
                            }
                        ]
                    },
                    {
                        "uuid": "2718953ca7ce4e069fe1fa935ad294a6",
                        "name": "Cluster nodes online",
                        "type": "DEPENDENT",
                        "key": "pveapi.datacenter.clusternodesonline",
                        "delay": "0",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.type == \"node\" && @.status == \"online\")].length()"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.datacenter.master.resources"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Datacenter"
                            }
                        ]
                    },
                    {
                        "uuid": "de6e90004cbb4401889275608d2c1d7a",
                        "name": "pveapi datacenter master resources",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.datacenter.master.resources",
                        "delay": "10m",
                        "history": "1h",
                        "trends": "0",
                        "value_type": "TEXT",
                        "description": "Item specifically does not use cluster/config/nodes as that has no information for single node systems.",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/cluster/resources",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Datacenter"
                            }
                        ],
                        "triggers": [
                            {
                                "uuid": "db5709857e994f9e85376cec7ae1b281",
                                "expression": "nodata(/Template pve api datacenter/pveapi.datacenter.master.resources,20m)=1",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "nodata(/Template pve api datacenter/pveapi.datacenter.master.resources,2m)=0",
                                "name": "{$PVESERVER} Proxmox API unreachable",
                                "priority": "DISASTER"
                            }
                        ]
                    },
                    {
                        "uuid": "0ce78178593843ab9e4154d4508f6f25",
                        "name": "pveapi datacenter master tasks",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.datacenter.master.tasks",
                        "delay": "2m",
                        "history": "1h",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/cluster/tasks",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Datacenter"
                            }
                        ]
                    },
                    {
                        "uuid": "50472fc2be7249b782cd1017d19eeb2e",
                        "name": "Tasks failed",
                        "type": "DEPENDENT",
                        "key": "pveapi.datacenter.tasks.failed",
                        "delay": "0",
                        "preprocessing": [
                            {
                                "type": "JAVASCRIPT",
                                "parameters": [
                                    "var data = JSON.parse(value);\nconst curtime = Math.round(Date.now() / 1000)\n\nfor (x in data.body.data) {\n   if ('starttime' in data.body.data[x])\n      data.body.data[x].starttime = curtime - data.body.data[x].starttime;\n   if ('endtime' in data.body.data[x])\n      data.body.data[x].endtime = curtime - data.body.data[x].endtime;\n}\n\nreturn JSON.stringify(data);"
                                ]
                            },
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.starttime < \"{$PVETASKTIME}\" && @.endtime && @.status != \"OK\" && @.status != \"Failed to run vncproxy.\")].length()"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.datacenter.master.tasks"
                        },
                        "triggers": [
                            {
                                "uuid": "462bb47210904e90b98edcbca6f66973",
                                "expression": "last(/Template pve api datacenter/pveapi.datacenter.tasks.failed,#1) > 0",
                                "name": "{$PVESERVER} tasks failed",
                                "priority": "WARNING",
                                "manual_close": "YES"
                            }
                        ]
                    },
                    {
                        "uuid": "188374de2473498c9345f006d374e32b",
                        "name": "Tasks running",
                        "type": "DEPENDENT",
                        "key": "pveapi.datacenter.tasks.running",
                        "delay": "0",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(!@.endtime)].length()"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.datacenter.master.tasks"
                        }
                    },
                    {
                        "uuid": "0399381bb22e49008af92918f68005ae",
                        "name": "Tasks total",
                        "type": "DEPENDENT",
                        "key": "pveapi.datacenter.tasks.total",
                        "delay": "0",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[*].length()"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.datacenter.master.tasks"
                        }
                    }
                ],
                "discovery_rules": [
                    {
                        "uuid": "2ee43a8e88fb44ada00aea58a3f68c77",
                        "name": "pveapi datacenter discovery lxc",
                        "type": "DEPENDENT",
                        "key": "pveapi.datacenter.discovery.lxc",
                        "delay": "0",
                        "lifetime": "5d",
                        "host_prototypes": [
                            {
                                "uuid": "018549507b8045619f16f8aeae4c9dc4",
                                "host": "lxc {#PVELXCNAME}",
                                "name": "{#PVELXCNAME} (on {#PVENODE})",
                                "group_links": [
                                    {
                                        "group": {
                                            "name": "PVE LXC"
                                        }
                                    }
                                ],
                                "group_prototypes": [
                                    {
                                        "name": "{#PVENODE} (lxc)"
                                    }
                                ],
                                "templates": [
                                    {
                                        "name": "Template pve api lxc"
                                    }
                                ],
                                "macros": [
                                    {
                                        "macro": "{$PVELXCID}",
                                        "value": "{#PVELXCID}"
                                    },
                                    {
                                        "macro": "{$PVELXCNAME}",
                                        "value": "{#PVELXCNAME}"
                                    },
                                    {
                                        "macro": "{$PVELXCPOOL}",
                                        "value": "{#PVELXCPOOL}"
                                    },
                                    {
                                        "macro": "{$PVENODE}",
                                        "value": "{#PVENODE}"
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.datacenter.master.resources"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVELXCID}",
                                "path": "$.vmid"
                            },
                            {
                                "lld_macro": "{#PVELXCNAME}",
                                "path": "$.name"
                            },
                            {
                                "lld_macro": "{#PVELXCPOOL}",
                                "path": "$.pool"
                            },
                            {
                                "lld_macro": "{#PVENODE}",
                                "path": "$.node"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.type == \"lxc\")]"
                                ],
                                "error_handler": "DISCARD_VALUE"
                            }
                        ]
                    },
                    {
                        "uuid": "46e03e45a837433aad3a980cdebe1de6",
                        "name": "pveapi datacenter discovery node",
                        "type": "DEPENDENT",
                        "key": "pveapi.datacenter.discovery.node",
                        "delay": "0",
                        "lifetime": "10d",
                        "item_prototypes": [
                            {
                                "uuid": "d1187755de3744eeaccb702a74c18bac",
                                "name": "Node {#PVENODE} online",
                                "type": "DEPENDENT",
                                "key": "pxeapi.datacenter.node.online[{#PVENODE}]",
                                "delay": "0",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data[?(@.node== \"{#PVENODE}\" && @.status == \"online\")].status.length()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.datacenter.master.resources"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Datacenter"
                                    }
                                ],
                                "trigger_prototypes": [
                                    {
                                        "uuid": "142fe8a88c8d489abafdac7504bf9b16",
                                        "expression": "last(/Template pve api datacenter/pxeapi.datacenter.node.online[{#PVENODE}])=0",
                                        "name": "Node {#PVENODE} offline",
                                        "priority": "HIGH"
                                    }
                                ]
                            }
                        ],
                        "host_prototypes": [
                            {
                                "uuid": "1c311b8889e248cd8e3509b158b9b58e",
                                "host": "node {#PVENODE}",
                                "name": "{#PVENODE}",
                                "group_links": [
                                    {
                                        "group": {
                                            "name": "PVE Node"
                                        }
                                    }
                                ],
                                "templates": [
                                    {
                                        "name": "Template pve api node"
                                    }
                                ],
                                "macros": [
                                    {
                                        "macro": "{$PVENODE}",
                                        "value": "{#PVENODE}"
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.datacenter.master.resources"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVENODE}",
                                "path": "$.node"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.type == \"node\")]"
                                ],
                                "error_handler": "DISCARD_VALUE"
                            }
                        ]
                    },
                    {
                        "uuid": "dfb983681b4543868377640b801cd452",
                        "name": "pveapi datacenter discovery qemu",
                        "type": "DEPENDENT",
                        "key": "pveapi.datacenter.discovery.qemu",
                        "delay": "0",
                        "lifetime": "5d",
                        "host_prototypes": [
                            {
                                "uuid": "f670c3641b644ad6a00eb1498743a1c5",
                                "host": "qemu {#PVEQEMUNAME}",
                                "name": "{#PVEQEMUNAME} (on {#PVENODE})",
                                "group_links": [
                                    {
                                        "group": {
                                            "name": "PVE Qemu"
                                        }
                                    }
                                ],
                                "group_prototypes": [
                                    {
                                        "name": "{#PVENODE} (qemu)"
                                    }
                                ],
                                "templates": [
                                    {
                                        "name": "Template pve api qemu"
                                    }
                                ],
                                "macros": [
                                    {
                                        "macro": "{$PVENODE}",
                                        "value": "{#PVENODE}"
                                    },
                                    {
                                        "macro": "{$PVEQEMUID}",
                                        "value": "{#PVEQEMUID}"
                                    },
                                    {
                                        "macro": "{$PVEQEMUNAME}",
                                        "value": "{#PVEQEMUNAME}"
                                    },
                                    {
                                        "macro": "{$PVEQEMUPOOL}",
                                        "value": "{#PVEQEMUPOOL}"
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.datacenter.master.resources"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVENODE}",
                                "path": "$.node"
                            },
                            {
                                "lld_macro": "{#PVEQEMUID}",
                                "path": "$.vmid"
                            },
                            {
                                "lld_macro": "{#PVEQEMUNAME}",
                                "path": "$.name"
                            },
                            {
                                "lld_macro": "{#PVEQEMUPOOL}",
                                "path": "$.pool"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.type == \"qemu\")]"
                                ],
                                "error_handler": "DISCARD_VALUE"
                            }
                        ]
                    }
                ],
                "dashboards": [
                    {
                        "uuid": "1b8431cf88d64f95abda9b544ec61d40",
                        "name": "Cluster status",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "width": "24",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api datacenter",
                                                    "name": "Cluster status"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                "uuid": "975578387988488bb324a44bcffd6292",
                "template": "Template pve api lxc",
                "name": "Template pve api lxc",
                "description": "This template is used by Template pve api datacenter. Please don't use directly.",
                "templates": [
                    {
                        "name": "Template pve api settings"
                    }
                ],
                "groups": [
                    {
                        "name": "Production"
                    },
                    {
                        "name": "Templates"
                    }
                ],
                "items": [
                    {
                        "uuid": "00ec725b01924ad7b67938c7cd1953d7",
                        "name": "CPU",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.cpu",
                        "delay": "0",
                        "value_type": "FLOAT",
                        "units": "%",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.cpu"
                                ]
                            },
                            {
                                "type": "MULTIPLIER",
                                "parameters": [
                                    "100"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "9b4a097417274609ba330e21e8a37b6d",
                        "name": "CPUs",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.cpus",
                        "delay": "0",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.cpus"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "03f17c29fb0b479ca100d48396bf404b",
                        "name": "Disk used",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.disk",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.disk"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "7346b33c66114725a705a3653aac6e3f",
                        "name": "Disk free",
                        "type": "CALCULATED",
                        "key": "pveapi.lxc.diskfree",
                        "units": "%",
                        "params": "100*(last(//pveapi.lxc.maxdisk) - last(//pveapi.lxc.disk)) / last(//pveapi.lxc.maxdisk)",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "97f0a79c3fa6402a8a90d37cb558301e",
                        "name": "Disk read",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.diskread",
                        "delay": "0",
                        "units": "Bps",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.diskread"
                                ]
                            },
                            {
                                "type": "CHANGE_PER_SECOND",
                                "parameters": [
                                    ""
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "25d9e7a758394b65a5b0d0f185aa8b27",
                        "name": "Disk write",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.diskwrite",
                        "delay": "0",
                        "units": "Bps",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.diskwrite"
                                ]
                            },
                            {
                                "type": "CHANGE_PER_SECOND",
                                "parameters": [
                                    ""
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "55050e46f227422289ba90cb8d8e9f82",
                        "name": "Lock",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.lock",
                        "delay": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.lock"
                                ],
                                "error_handler": "CUSTOM_VALUE"
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "d8c58fd8185d4423a73ef52b5f1958e9",
                        "name": "pveapi lxc master snapshot",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.lxc.master.snapshot",
                        "delay": "5m",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/lxc/{$PVELXCID}/snapshot",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "allow_traps": "YES",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "f18c30dd8bb4467abfb92d2ac9f119c9",
                        "name": "pveapi lxc master status",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.lxc.master.status",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/lxc/{$PVELXCID}/status/current",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "33c454b03fb84e0ba213d4e7ccc122c1",
                        "name": "Disk size",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.maxdisk",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.maxdisk"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "104c33822b6f472ebe7f0497ea80d8cb",
                        "name": "Memory size",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.maxmem",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.maxmem"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "7158e1a05db54d889166c8aa9355d0ff",
                        "name": "Swap size",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.maxswap",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.maxswap"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "27169e31f94e4d328c8367faad9fbab8",
                        "name": "Memory used",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.mem",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.mem"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "116cf567723e40f884406e30bbb9504a",
                        "name": "Memory free",
                        "type": "CALCULATED",
                        "key": "pveapi.lxc.memfree",
                        "units": "%",
                        "params": "100*(((last(//pveapi.lxc.maxmem)+last(//pveapi.lxc.maxswap)) - (last(//pveapi.lxc.mem)+last(//pveapi.lxc.swap))) / (last(//pveapi.lxc.maxmem)+last(//pveapi.lxc.maxswap)))",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "bc1eb7f680c5453e95a6b8b7fc14a665",
                        "name": "Net in",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.netin",
                        "delay": "0",
                        "units": "bps",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.netin"
                                ]
                            },
                            {
                                "type": "MULTIPLIER",
                                "parameters": [
                                    "8"
                                ]
                            },
                            {
                                "type": "CHANGE_PER_SECOND",
                                "parameters": [
                                    ""
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "9c40a6bd0d8b4f148aec53f4b0a71040",
                        "name": "Net out",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.netout",
                        "delay": "0",
                        "units": "bps",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.netout"
                                ]
                            },
                            {
                                "type": "MULTIPLIER",
                                "parameters": [
                                    "8"
                                ]
                            },
                            {
                                "type": "CHANGE_PER_SECOND",
                                "parameters": [
                                    ""
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "752630c9ebe54208978b190238063c7f",
                        "name": "Pool check",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.lxc.poolcheck",
                        "delay": "15m",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.poolid==\"{$PVELXCPOOL}\")].poolid.first()"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "__"
                            },
                            {
                                "type": "MATCHES_REGEX",
                                "parameters": [
                                    "{$PVENOPROBLEMPOOL}"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "1"
                            },
                            {
                                "type": "IN_RANGE",
                                "parameters": [
                                    "1",
                                    "2"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "0"
                            }
                        ],
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/pools",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "e6f784d27f924e7cba9010d91742d20a",
                        "name": "Status",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.status",
                        "delay": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.status"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "e80223be14534eaea97b4d621c04a9df",
                        "name": "Swap used",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.swap",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.swap"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    },
                    {
                        "uuid": "bcd4d2ff19b14047be3c1a734ff0a66e",
                        "name": "Uptime",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.uptime",
                        "delay": "0",
                        "units": "uptime",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.uptime"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE LXC"
                            }
                        ]
                    }
                ],
                "discovery_rules": [
                    {
                        "uuid": "9f26aac459f04599ac3d152074fc5809",
                        "name": "pveapi lxc discovery snapshot",
                        "type": "DEPENDENT",
                        "key": "pveapi.lxc.snapshot.discovery",
                        "delay": "0",
                        "lifetime": "1h",
                        "description": "Discover snapshots for lxc.",
                        "item_prototypes": [
                            {
                                "uuid": "b116819a855547cb98d147ab37e271f4",
                                "name": "Snapshot {#PVELXCSNAPSHOT} check",
                                "type": "DEPENDENT",
                                "key": "pveapi.lxc.snapshot.check[{#PVELXCSNAPSHOT}]",
                                "delay": "0",
                                "history": "1h",
                                "trends": "0",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data[?(@.name==\"{#PVELXCSNAPSHOT}\" && ! (@.name =~ \"^{$PVESNAPSHOTEXCLUDE}\"))].length()"
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.lxc.master.snapshot"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE LXC"
                                    }
                                ]
                            },
                            {
                                "uuid": "d2305595e07e413baca36fb1a17dd0cb",
                                "name": "Snapshot {#PVELXCSNAPSHOT} create time",
                                "type": "DEPENDENT",
                                "key": "pveapi.lxc.snapshot.time[{#PVELXCSNAPSHOT}]",
                                "delay": "0",
                                "history": "1h",
                                "trends": "0",
                                "units": "unixtime",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data[?(@.name==\"{#PVELXCSNAPSHOT}\")].snaptime.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.lxc.master.snapshot"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE LXC"
                                    }
                                ]
                            }
                        ],
                        "trigger_prototypes": [
                            {
                                "uuid": "dea17456f41f4600b746590999a1e113",
                                "expression": "now()-\nlast(/Template pve api lxc/pveapi.lxc.snapshot.time[{#PVELXCSNAPSHOT}])>{$PVESNAPSHOTAGE} and last(/Template pve api lxc/pveapi.lxc.snapshot.check[{#PVELXCSNAPSHOT}])=1",
                                "name": "{$PVELXCNAME} snapshot {#PVELXCSNAPSHOT} too old",
                                "priority": "WARNING",
                                "manual_close": "YES"
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.lxc.master.snapshot"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVELXCSNAPSHOT}",
                                "path": "$.name"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.name!=\"current\")]"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "{ \"data\":[] }"
                            }
                        ]
                    }
                ],
                "dashboards": [
                    {
                        "uuid": "01eed1ba71b94af79c18b2a258f678ee",
                        "name": "LXC overview",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "PLAIN_TEXT",
                                        "width": "12",
                                        "fields": [
                                            {
                                                "type": "ITEM",
                                                "name": "itemids",
                                                "value": {
                                                    "host": "Template pve api lxc",
                                                    "key": "pveapi.lxc.status"
                                                }
                                            },
                                            {
                                                "type": "INTEGER",
                                                "name": "show_lines",
                                                "value": "1"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "y": "2",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api lxc",
                                                    "name": "CPU"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "y": "7",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api lxc",
                                                    "name": "Memory usage"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "y": "12",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api lxc",
                                                    "name": "Disk usage"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "x": "12",
                                        "y": "2",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api lxc",
                                                    "name": "Uptime"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "x": "12",
                                        "y": "7",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api lxc",
                                                    "name": "Swap usage"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "x": "12",
                                        "y": "12",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api lxc",
                                                    "name": "Network traffic"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                "uuid": "cc75782a05464ff893b58e7f4539b0f7",
                "template": "Template pve api node",
                "name": "Template pve api node",
                "description": "This template is used by Template pve api datacenter. Please don't use directly.",
                "templates": [
                    {
                        "name": "Template pve api settings"
                    }
                ],
                "groups": [
                    {
                        "name": "Production"
                    },
                    {
                        "name": "Templates"
                    }
                ],
                "items": [
                    {
                        "uuid": "580894e9044c404f80829df7f44a481b",
                        "name": "CPU user",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.cpu.user",
                        "delay": "0",
                        "value_type": "FLOAT",
                        "units": "%",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.cpu"
                                ]
                            },
                            {
                                "type": "MULTIPLIER",
                                "parameters": [
                                    "100"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "5c9784510bce4f759d2ccb3f93be0154",
                        "name": "CPU wait",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.cpu.wait",
                        "delay": "0",
                        "value_type": "FLOAT",
                        "units": "%",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.wait"
                                ]
                            },
                            {
                                "type": "MULTIPLIER",
                                "parameters": [
                                    "100"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "20a702998e954b08ae4f021000a38451",
                        "name": "CPUs",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.cpus",
                        "delay": "0",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.cpuinfo.cpus"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "76146ef896c94bdb8aa44badeb0db31d",
                        "name": "Kernel version",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.kernelversion",
                        "delay": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.kversion"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "467025c09e474347bcfcd6e9ee01fa2f",
                        "name": "KSM",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.ksm",
                        "delay": "0",
                        "value_type": "FLOAT",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.ksm.shared"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "daeb9c10aad54404bf3807a7820908bd",
                        "name": "Load average",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.load",
                        "delay": "0",
                        "value_type": "FLOAT",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.loadavg[0]"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "bb7773418733474cb39973903cc52bab",
                        "name": "pveapi node master status",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.node.master",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/status",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "95dac351045341e9aa7225aa1b568e84",
                        "name": "pveapi node master disks",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.node.master.disks",
                        "delay": "1h",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/disks/list",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "337239c046da45cfb3e321c7cda7e228",
                        "name": "pveapi node master lvm",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.node.master.lvm",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/disks/lvm",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "07a31ac6e8bf45bfb40b6ea3364e3eca",
                        "name": "pveapi node master lvmthin",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.node.master.lvmthin",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/disks/lvmthin",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "805a56d0402b41ba9cb3b7104c595a0f",
                        "name": "pveapi node master services",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.node.master.services",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/services",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "2344fa360da241df8e437bffba736077",
                        "name": "pveapi node master storagepools",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.node.master.storagepools",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "preprocessing": [
                            {
                                "type": "NOT_MATCHES_REGEX",
                                "parameters": [
                                    "^$"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "[]"
                            }
                        ],
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/storage",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "98ee8e669ae347efb1d84f753d1a7b5b",
                        "name": "pveapi node master zfs",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.node.master.zfs",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/disks/zfs",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "2fdbbd54d77e449d9fb5b8ab6652f5b3",
                        "name": "Memory size",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.mem.total",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.memory.total"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "66ef9aaaa00b4fccb7bbff68d43453a4",
                        "name": "Memory used",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.mem.used",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.memory.used"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "2e5e1308fc86472cbe1d3aae8e7f8108",
                        "name": "PVE version",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.pveversion",
                        "delay": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.pveversion"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "7b361dbc7843401cb0ee469d35b72880",
                        "name": "Root filesystem size",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.rootfs.total",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.rootfs.total"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "484a9d3d696c4837b6f77550dca78b73",
                        "name": "Root filesystem used",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.rootfs.used",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.rootfs.used"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "fccedaf7c07e4be2bc51256372384bee",
                        "name": "Swap size",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.swap.total",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.swap.total"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "bfe34929de9040caae820385ee6c24e0",
                        "name": "Swap used",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.swap.used",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.swap.used"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ]
                    },
                    {
                        "uuid": "078b80c30ec54ef68b97a21f584764da",
                        "name": "Uptime",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.uptime",
                        "delay": "0",
                        "units": "uptime",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.uptime"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Node"
                            }
                        ],
                        "triggers": [
                            {
                                "uuid": "6d85ac93491f4a0daa32b2a0c91984b1",
                                "expression": "change(/Template pve api node/pveapi.node.uptime)<0",
                                "name": "{$PVENODE} is restarted",
                                "priority": "INFO",
                                "description": "{$PVENODE} restarted",
                                "manual_close": "YES"
                            }
                        ]
                    }
                ],
                "discovery_rules": [
                    {
                        "uuid": "8c44b51adeef43088d22d4394619251c",
                        "name": "pveapi node discovery disks",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.discovery.disks",
                        "delay": "0",
                        "lifetime": "5d",
                        "item_prototypes": [
                            {
                                "uuid": "376fe3ffdb5542e19b661463cf29c9d2",
                                "name": "Disk {#PVENODEDISK} health",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.disk.health[{#PVENODEDISK}]",
                                "delay": "0",
                                "trends": "0",
                                "value_type": "TEXT",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data[?(@.devpath==\"{#PVENODEDISK}\")].health.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.disks"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ],
                                "trigger_prototypes": [
                                    {
                                        "uuid": "bc24d66114454e9ebf9e9fc0c8ba7549",
                                        "expression": "find(/Template pve api node/pveapi.node.disk.health[{#PVENODEDISK}],,\"regexp\",\"PASSED|OK|UNKNOWN\")=0",
                                        "name": "{$PVENODE} disk {#PVENODEDISK} health failed",
                                        "priority": "DISASTER",
                                        "manual_close": "YES"
                                    }
                                ]
                            },
                            {
                                "uuid": "37068cdd6d8049aab2db19987b221c8e",
                                "name": "Disk {#PVENODEDISK} wearout",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.disk.wearout[{#PVENODEDISK}]",
                                "delay": "0",
                                "units": "%",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data[?(@.devpath==\"{#PVENODEDISK}\")].wearout.first()"
                                        ]
                                    },
                                    {
                                        "type": "NOT_MATCHES_REGEX",
                                        "parameters": [
                                            "N/A"
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "100"
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.disks"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ],
                                "trigger_prototypes": [
                                    {
                                        "uuid": "9c88aa4c079e451484c45736302f068f",
                                        "expression": "last(/Template pve api node/pveapi.node.disk.wearout[{#PVENODEDISK}])<-10",
                                        "name": "{$PVENODE} disk {#PVENODEDISK} wearout under 10%",
                                        "priority": "HIGH",
                                        "manual_close": "YES"
                                    },
                                    {
                                        "uuid": "b351159990db43e8a163d64673d0c271",
                                        "expression": "last(/Template pve api node/pveapi.node.disk.wearout[{#PVENODEDISK}])<=20",
                                        "name": "{$PVENODE} disk {#PVENODEDISK} wearout under 20%",
                                        "priority": "AVERAGE",
                                        "manual_close": "YES"
                                    }
                                ]
                            }
                        ],
                        "graph_prototypes": [
                            {
                                "uuid": "9009a1cd68b14ed1b5da495f7cf2d39e",
                                "name": "Disk wearout ({?last(//pveapi.node.disk.health[{#PVENODEDISK}])})",
                                "ymin_type_1": "FIXED",
                                "ymax_type_1": "FIXED",
                                "graph_items": [
                                    {
                                        "drawtype": "FILLED_REGION",
                                        "color": "199C0D",
                                        "item": {
                                            "host": "Template pve api node",
                                            "key": "pveapi.node.disk.wearout[{#PVENODEDISK}]"
                                        }
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master.disks"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVENODEDISK}",
                                "path": "$.devpath"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "[]"
                            }
                        ]
                    },
                    {
                        "uuid": "fa0c9b682e72493e8673826fd439c9b0",
                        "name": "pveapi node discovery lvm",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.discovery.lvm",
                        "delay": "0",
                        "lifetime": "5d",
                        "item_prototypes": [
                            {
                                "uuid": "c7761e7882814dc39c72e0d9c071f75c",
                                "name": "LVM {#PVENODELVM} free",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.lvm.free[{#PVENODELVM}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.children.[?(@.name==\"{#PVENODELVM}\")].free.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.lvm"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            },
                            {
                                "uuid": "30c035eee7a741d6832e90bd9101fcc9",
                                "name": "LVM {#PVENODELVM} size",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.lvm.size[{#PVENODELVM}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.children.[?(@.name==\"{#PVENODELVM}\")].size.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.lvm"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            },
                            {
                                "uuid": "adeb4e86ec25400ba407f7d2ddb7c4fa",
                                "name": "LVM {#PVENODELVM} used",
                                "type": "CALCULATED",
                                "key": "pveapi.node.lvm.used[{#PVENODELVM}]",
                                "units": "B",
                                "params": "last(//pveapi.node.lvm.size[{#PVENODELVM}]) - last(//pveapi.node.lvm.free[{#PVENODELVM}])",
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            }
                        ],
                        "graph_prototypes": [
                            {
                                "uuid": "5938077c29974596afb318a01f136d59",
                                "name": "LVM {#PVENODELVM} used",
                                "ymin_type_1": "FIXED",
                                "ymax_type_1": "ITEM",
                                "ymax_item_1": {
                                    "host": "Template pve api node",
                                    "key": "pveapi.node.lvm.size[{#PVENODELVM}]"
                                },
                                "graph_items": [
                                    {
                                        "drawtype": "FILLED_REGION",
                                        "color": "199C0D",
                                        "item": {
                                            "host": "Template pve api node",
                                            "key": "pveapi.node.lvm.used[{#PVENODELVM}]"
                                        }
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master.lvm"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVENODELVM}",
                                "path": "$.name"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.children"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "[]"
                            }
                        ]
                    },
                    {
                        "uuid": "d15ecd14900f4423a2e7d1f06aefbf25",
                        "name": "pveapi node discovery lvmthin",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.discovery.lvmthin",
                        "delay": "0",
                        "lifetime": "5d",
                        "item_prototypes": [
                            {
                                "uuid": "44dee8a28f7643bb85f0cc209e1fa9a5",
                                "name": "LVMThin {#PVENODELVMTHIN} metadata size",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.lvmthin.metadatasize[{#PVENODELVMTHIN}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.lv==\"{#PVENODELVMTHIN}\")].metadata_size.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.lvmthin"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            },
                            {
                                "uuid": "d7211f39624f4fb8a9a22e0bc277d1aa",
                                "name": "LVMThin {#PVENODELVMTHIN} metadata used",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.lvmthin.metadataused[{#PVENODELVMTHIN}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.lv==\"{#PVENODELVMTHIN}\")].metadata_used.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.lvmthin"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            },
                            {
                                "uuid": "d746fd4ce5624e32b747d0a1f92262ec",
                                "name": "LVMThin {#PVENODELVMTHIN} size",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.lvmthin.size[{#PVENODELVMTHIN}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.lv==\"{#PVENODELVMTHIN}\")].lv_size.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.lvmthin"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            },
                            {
                                "uuid": "0cdd92bedcb14fd39befd1b7c04c0ced",
                                "name": "LVMThin {#PVENODELVMTHIN} used",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.lvmthin.used[{#PVENODELVMTHIN}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.lv==\"{#PVENODELVMTHIN}\")].used.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.lvmthin"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            }
                        ],
                        "trigger_prototypes": [
                            {
                                "uuid": "664ca8bb53604ea1bcc39c7a4e583edb",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.metadataused[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.metadatasize[{#PVENODELVMTHIN}])))\n> 98",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.metadataused[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.metadatasize[{#PVENODELVMTHIN}])))\n< 95",
                                "name": "{$PVENODE} lvm thin metadata {#PVENODELVMTHIN} less then 2% free",
                                "priority": "DISASTER"
                            },
                            {
                                "uuid": "9030bda7c5a549229e2a82207c434268",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.metadataused[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.metadatasize[{#PVENODELVMTHIN}])))\n> 90",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.metadataused[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.metadatasize[{#PVENODELVMTHIN}]))) < 88",
                                "name": "{$PVENODE} lvm thin metadata {#PVENODELVMTHIN} less then 10% free",
                                "priority": "HIGH"
                            },
                            {
                                "uuid": "c56349f1242849de854389685e65100a",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.metadataused[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.metadatasize[{#PVENODELVMTHIN}])))\n> 80",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.metadataused[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.metadatasize[{#PVENODELVMTHIN}])))\n< 75",
                                "name": "{$PVENODE} lvm thin metadata {#PVENODELVMTHIN} less then 20% free",
                                "priority": "WARNING"
                            },
                            {
                                "uuid": "0ebf3fe825a94067a292846104bdabcd",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.used[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.size[{#PVENODELVMTHIN}])))\n> 98",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.used[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.size[{#PVENODELVMTHIN}])))\n< 95",
                                "name": "{$PVENODE} lvm thin {#PVENODELVMTHIN} less then 2% free",
                                "priority": "DISASTER"
                            },
                            {
                                "uuid": "f6612447d5eb4a649316622af57081c4",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.used[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.size[{#PVENODELVMTHIN}])))\n> 90",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.used[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.size[{#PVENODELVMTHIN}])))\n< 88",
                                "name": "{$PVENODE} lvm thin {#PVENODELVMTHIN} less then 10% free",
                                "priority": "HIGH"
                            },
                            {
                                "uuid": "b79b31ad77f94549a32cd31dbce53c4a",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.used[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.size[{#PVENODELVMTHIN}])))\n> 80",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.lvmthin.used[{#PVENODELVMTHIN}])/\nlast(/Template pve api node/pveapi.node.lvmthin.size[{#PVENODELVMTHIN}])))\n< 75",
                                "name": "{$PVENODE} lvm thin {#PVENODELVMTHIN} less then 20% free",
                                "priority": "WARNING"
                            }
                        ],
                        "graph_prototypes": [
                            {
                                "uuid": "861ed4c6d98645fe8dc2ffc341f8c43f",
                                "name": "LVMThin {#PVENODELVMTHIN} metadata usage",
                                "ymin_type_1": "FIXED",
                                "ymax_type_1": "ITEM",
                                "ymax_item_1": {
                                    "host": "Template pve api node",
                                    "key": "pveapi.node.lvmthin.metadatasize[{#PVENODELVMTHIN}]"
                                },
                                "graph_items": [
                                    {
                                        "drawtype": "FILLED_REGION",
                                        "color": "199C0D",
                                        "item": {
                                            "host": "Template pve api node",
                                            "key": "pveapi.node.lvmthin.metadataused[{#PVENODELVMTHIN}]"
                                        }
                                    }
                                ]
                            },
                            {
                                "uuid": "839179c33cc448e0b0522b1709006fcc",
                                "name": "LVMThin {#PVENODELVMTHIN} usage",
                                "ymin_type_1": "FIXED",
                                "ymax_type_1": "ITEM",
                                "ymax_item_1": {
                                    "host": "Template pve api node",
                                    "key": "pveapi.node.lvmthin.size[{#PVENODELVMTHIN}]"
                                },
                                "graph_items": [
                                    {
                                        "drawtype": "FILLED_REGION",
                                        "color": "F63100",
                                        "item": {
                                            "host": "Template pve api node",
                                            "key": "pveapi.node.lvmthin.used[{#PVENODELVMTHIN}]"
                                        }
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master.lvmthin"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVENODELVMTHIN}",
                                "path": "$.lv"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "[]"
                            }
                        ]
                    },
                    {
                        "uuid": "8882d95fcc1a45d3a2401bac7784d3c0",
                        "name": "pveapi node discovery services",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.discovery.services",
                        "delay": "0",
                        "filter": {
                            "conditions": [
                                {
                                    "macro": "{#PVENODESERVICEUNITSTATE}",
                                    "value": "^not-found$",
                                    "operator": "NOT_MATCHES_REGEX",
                                    "formulaid": "A"
                                }
                            ]
                        },
                        "lifetime": "5d",
                        "item_prototypes": [
                            {
                                "uuid": "c6c7d3ff89c94965b02f8c1a94e2a811",
                                "name": "service {#PVENODESERVICE}",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.services.state[{#PVENODESERVICE}]",
                                "delay": "0",
                                "trends": "0",
                                "value_type": "TEXT",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.name==\"{#PVENODESERVICE}\")].state.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.services"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ],
                                "trigger_prototypes": [
                                    {
                                        "uuid": "de30c6b9c3c8452a93523b79e14eb657",
                                        "expression": "find(/Template pve api node/pveapi.node.services.state[{#PVENODESERVICE}],,\"regexp\",\"running\")=0",
                                        "name": "{$PVENODE} service {#PVENODESERVICE} not running",
                                        "priority": "AVERAGE"
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master.services"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVENODESERVICEUNITSTATE}",
                                "path": "$.['unit-state']"
                            },
                            {
                                "lld_macro": "{#PVENODESERVICE}",
                                "path": "$.name"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "[]"
                            }
                        ]
                    },
                    {
                        "uuid": "41ea6936c8574a00884ec761766dc521",
                        "name": "pveapi node discovery storage pools",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.discovery.storagepool",
                        "delay": "0",
                        "lifetime": "5d",
                        "item_prototypes": [
                            {
                                "uuid": "1410e9b5e846476aa726ae9ba897dd08",
                                "name": "storage pool {#PVENODESTORAGEPOOL} size",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.storagepool.size[{#PVENODESTORAGEPOOL}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.storage==\"{#PVENODESTORAGEPOOL}\")].total.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.storagepools"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            },
                            {
                                "uuid": "8344791aba89461580c9d5056cf3c60a",
                                "name": "storage pool {#PVENODESTORAGEPOOL} used",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.storagepool.used[{#PVENODESTORAGEPOOL}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.storage==\"{#PVENODESTORAGEPOOL}\")].used.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.storagepools"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            }
                        ],
                        "trigger_prototypes": [
                            {
                                "uuid": "4e37be1434ed4100a2898747818a9c85",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.storagepool.used[{#PVENODESTORAGEPOOL}])/\nlast(/Template pve api node/pveapi.node.storagepool.size[{#PVENODESTORAGEPOOL}])))\n> 98",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.storagepool.used[{#PVENODESTORAGEPOOL}])/\nlast(/Template pve api node/pveapi.node.storagepool.size[{#PVENODESTORAGEPOOL}])))\n< 95",
                                "name": "{$PVENODE} storage pool {#PVENODESTORAGEPOOL} less then 2% free",
                                "priority": "DISASTER",
                                "manual_close": "YES"
                            },
                            {
                                "uuid": "5f1356ccc6854166b67cc6d5b365dc6f",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.storagepool.used[{#PVENODESTORAGEPOOL}])/\nlast(/Template pve api node/pveapi.node.storagepool.size[{#PVENODESTORAGEPOOL}])))\n> 90",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.storagepool.used[{#PVENODESTORAGEPOOL}])/\nlast(/Template pve api node/pveapi.node.storagepool.size[{#PVENODESTORAGEPOOL}])))\n< 88",
                                "name": "{$PVENODE} storage pool {#PVENODESTORAGEPOOL} less then 10% free",
                                "priority": "HIGH",
                                "manual_close": "YES"
                            },
                            {
                                "uuid": "992e85eb342a4880816adf7d1be0ae02",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.storagepool.used[{#PVENODESTORAGEPOOL}])/\nlast(/Template pve api node/pveapi.node.storagepool.size[{#PVENODESTORAGEPOOL}])))\n> 80",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.storagepool.used[{#PVENODESTORAGEPOOL}])/\nlast(/Template pve api node/pveapi.node.storagepool.size[{#PVENODESTORAGEPOOL}])))\n< 75",
                                "name": "{$PVENODE} storage pool {#PVENODESTORAGEPOOL} less then 20% free",
                                "priority": "WARNING",
                                "manual_close": "YES"
                            }
                        ],
                        "graph_prototypes": [
                            {
                                "uuid": "6370e59a69954921ab109c9cd3bd94ec",
                                "name": "storage pool {#PVENODESTORAGEPOOL} usage ({#PVENODESTORAGEPOOLTYPE})",
                                "ymin_type_1": "FIXED",
                                "ymax_type_1": "ITEM",
                                "ymax_item_1": {
                                    "host": "Template pve api node",
                                    "key": "pveapi.node.storagepool.size[{#PVENODESTORAGEPOOL}]"
                                },
                                "graph_items": [
                                    {
                                        "drawtype": "FILLED_REGION",
                                        "color": "199C0D",
                                        "item": {
                                            "host": "Template pve api node",
                                            "key": "pveapi.node.storagepool.used[{#PVENODESTORAGEPOOL}]"
                                        }
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master.storagepools"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVENODESTORAGEPOOLTYPE}",
                                "path": "$.type"
                            },
                            {
                                "lld_macro": "{#PVENODESTORAGEPOOL}",
                                "path": "$.storage"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "[]"
                            }
                        ]
                    },
                    {
                        "uuid": "f07000f8fc104c568c5624be6a44d268",
                        "name": "pveapi node discovery zfs",
                        "type": "DEPENDENT",
                        "key": "pveapi.node.discovery.zfs",
                        "delay": "0",
                        "lifetime": "5d",
                        "item_prototypes": [
                            {
                                "uuid": "662c0ff1f13c4778b59c935b2a28bebb",
                                "name": "zpool {#PVENODEZFSPOOL} allocated",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.zfs.alloc[{#PVENODEZFSPOOL}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.name==\"{#PVENODEZFSPOOL}\")].alloc.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.zfs"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            },
                            {
                                "uuid": "5d873f1df39c489d8a849c8ccd7b190f",
                                "name": "zpool {#PVENODEZFSPOOL} fragmented",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.zfs.frag[{#PVENODEZFSPOOL}]",
                                "delay": "0",
                                "units": "%",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.name==\"{#PVENODEZFSPOOL}\")].frag.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.zfs"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            },
                            {
                                "uuid": "c0c9c10bda0f4ff1a5ac6279f2da303b",
                                "name": "zpool {#PVENODEZFSPOOL} health",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.zfs.health[{#PVENODEZFSPOOL}]",
                                "delay": "0",
                                "trends": "0",
                                "value_type": "TEXT",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.name==\"{#PVENODEZFSPOOL}\")].health.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.zfs"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ],
                                "trigger_prototypes": [
                                    {
                                        "uuid": "a1dad15633944c9784dac5277af9fd2d",
                                        "expression": "find(/Template pve api node/pveapi.node.zfs.health[{#PVENODEZFSPOOL}],,\"regexp\",\"ONLINE\")=0",
                                        "name": "{$PVENODE} zpool {#PVENODEZFSPOOL} health failed",
                                        "priority": "DISASTER"
                                    }
                                ]
                            },
                            {
                                "uuid": "63d8dfec0a3a4cf3a6e2d6d382351cc1",
                                "name": "zpool {#PVENODEZFSPOOL} size",
                                "type": "DEPENDENT",
                                "key": "pveapi.node.zfs.size[{#PVENODEZFSPOOL}]",
                                "delay": "0",
                                "units": "B",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.[?(@.name==\"{#PVENODEZFSPOOL}\")].size.first()"
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.node.master.zfs"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Node"
                                    }
                                ]
                            }
                        ],
                        "trigger_prototypes": [
                            {
                                "uuid": "ed68b3bd2bc548029441ea3051402c33",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.zfs.alloc[{#PVENODEZFSPOOL}])/\nlast(/Template pve api node/pveapi.node.zfs.size[{#PVENODEZFSPOOL}])))\n> 98",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.zfs.alloc[{#PVENODEZFSPOOL}])/\nlast(/Template pve api node/pveapi.node.zfs.size[{#PVENODEZFSPOOL}])))\n< 95",
                                "name": "{$PVENODE} zpool {#PVENODEZFSPOOL} less then 2% free",
                                "priority": "DISASTER"
                            },
                            {
                                "uuid": "6d9fad5a1fa2472281a00a740d75f723",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.zfs.alloc[{#PVENODEZFSPOOL}])/\nlast(/Template pve api node/pveapi.node.zfs.size[{#PVENODEZFSPOOL}])))\n> 90",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.zfs.alloc[{#PVENODEZFSPOOL}])/\nlast(/Template pve api node/pveapi.node.zfs.size[{#PVENODEZFSPOOL}])))\n< 88",
                                "name": "{$PVENODE} zpool {#PVENODEZFSPOOL} less then 10% free",
                                "priority": "HIGH"
                            },
                            {
                                "uuid": "8ab8326e7241438da949a45476e1705b",
                                "expression": "(100*(last(/Template pve api node/pveapi.node.zfs.alloc[{#PVENODEZFSPOOL}])/\nlast(/Template pve api node/pveapi.node.zfs.size[{#PVENODEZFSPOOL}])))\n> 80",
                                "recovery_mode": "RECOVERY_EXPRESSION",
                                "recovery_expression": "(100*(last(/Template pve api node/pveapi.node.zfs.alloc[{#PVENODEZFSPOOL}])/\nlast(/Template pve api node/pveapi.node.zfs.size[{#PVENODEZFSPOOL}])))\n< 75",
                                "name": "{$PVENODE} zpool {#PVENODEZFSPOOL} less then 20% free",
                                "priority": "WARNING"
                            }
                        ],
                        "graph_prototypes": [
                            {
                                "uuid": "de21248b22f04ba99fa55b0fbdc81f0a",
                                "name": "zpool {#PVENODEZFSPOOL} fragmentation",
                                "ymin_type_1": "FIXED",
                                "ymax_type_1": "FIXED",
                                "graph_items": [
                                    {
                                        "color": "2774A4",
                                        "item": {
                                            "host": "Template pve api node",
                                            "key": "pveapi.node.zfs.frag[{#PVENODEZFSPOOL}]"
                                        }
                                    }
                                ]
                            },
                            {
                                "uuid": "14e45ab604cd4f2a9684fe0ecda29022",
                                "name": "zpool {#PVENODEZFSPOOL} usage ({?last(//pveapi.node.zfs.health[{#PVENODEZFSPOOL}])})",
                                "type": "STACKED",
                                "ymin_type_1": "FIXED",
                                "ymax_type_1": "ITEM",
                                "ymax_item_1": {
                                    "host": "Template pve api node",
                                    "key": "pveapi.node.zfs.size[{#PVENODEZFSPOOL}]"
                                },
                                "graph_items": [
                                    {
                                        "color": "F63100",
                                        "item": {
                                            "host": "Template pve api node",
                                            "key": "pveapi.node.zfs.alloc[{#PVENODEZFSPOOL}]"
                                        }
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.node.master.zfs"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVENODEZFSPOOL}",
                                "path": "$.name"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "[]"
                            }
                        ]
                    }
                ],
                "dashboards": [
                    {
                        "uuid": "1b86be8ebf6d4b02b306731fb904588d",
                        "name": "Disk",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "width": "24",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "ITEM_PROTOTYPE",
                                                "name": "itemid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "key": "pveapi.node.disk.wearout[{#PVENODEDISK}]"
                                                }
                                            },
                                            {
                                                "type": "INTEGER",
                                                "name": "source_type",
                                                "value": "3"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "uuid": "9a47637bd79a46749a2ec160d1f3e527",
                        "name": "LVM storage",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "width": "24",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "LVM {#PVENODELVM} used"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "uuid": "50344a667bbd43c19b6196e528efdbd3",
                        "name": "LVMThin storage",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "LVMThin {#PVENODELVMTHIN} usage"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "x": "12",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "LVMThin {#PVENODELVMTHIN} metadata usage"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "uuid": "fc842eb7c3a64880803b22487866ebf2",
                        "name": "Overview",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "PLAIN_TEXT",
                                        "width": "12",
                                        "fields": [
                                            {
                                                "type": "ITEM",
                                                "name": "itemids",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "key": "pveapi.node.pveversion"
                                                }
                                            },
                                            {
                                                "type": "INTEGER",
                                                "name": "show_lines",
                                                "value": "1"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "y": "2",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "CPU ({?last(//pveapi.node.cpus)} CPU(s))"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "y": "7",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "Memory ({?last(//pveapi.node.mem.total)})"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "y": "12",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "Root filesystem ({?last(//pveapi.node.rootfs.total)})"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "PLAIN_TEXT",
                                        "x": "12",
                                        "width": "12",
                                        "fields": [
                                            {
                                                "type": "ITEM",
                                                "name": "itemids",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "key": "pveapi.node.kernelversion"
                                                }
                                            },
                                            {
                                                "type": "INTEGER",
                                                "name": "show_lines",
                                                "value": "1"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "x": "12",
                                        "y": "2",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "Load average"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "x": "12",
                                        "y": "7",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "Swap ({?last(//pveapi.node.swap.total)})"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "x": "12",
                                        "y": "12",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "KSM"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "uuid": "bae80eb739e2403292427209cbe09c3b",
                        "name": "Storage pools",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "width": "24",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "storage pool {#PVENODESTORAGEPOOL} usage ({#PVENODESTORAGEPOOLTYPE})"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "uuid": "19ff18fa0d4f404d8a3633b6d53bac72",
                        "name": "ZFS storage",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "zpool {#PVENODEZFSPOOL} usage ({?last(//pveapi.node.zfs.health[{#PVENODEZFSPOOL}])})"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "x": "12",
                                        "width": "12",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api node",
                                                    "name": "zpool {#PVENODEZFSPOOL} fragmentation"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                "uuid": "a8d4a7cdccb048a2a0b009a95a0df38e",
                "template": "Template pve api qemu",
                "name": "Template pve api qemu",
                "description": "This template is used by Template pve api datacenter. Please don't use directly.",
                "templates": [
                    {
                        "name": "Template pve api settings"
                    }
                ],
                "groups": [
                    {
                        "name": "Production"
                    },
                    {
                        "name": "Templates"
                    }
                ],
                "items": [
                    {
                        "uuid": "a599be1052eb48009fe2d67a87638b79",
                        "name": "CPU",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.cpu",
                        "delay": "0",
                        "value_type": "FLOAT",
                        "units": "%",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.cpu"
                                ]
                            },
                            {
                                "type": "MULTIPLIER",
                                "parameters": [
                                    "100"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "b6a0a6adb61849399e5596c5cb8d7ea5",
                        "name": "CPUs",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.cpus",
                        "delay": "0",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.cpus"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "df398a06f094467fb5ef03d08db0bde4",
                        "name": "pveapi qemu master snapshot",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.qemu.master.snapshot",
                        "delay": "5m",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/qemu/{$PVEQEMUID}/snapshot",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "79e76be185f74002ad4c21ba90e448d4",
                        "name": "pveapi qemu master status",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.qemu.master.status",
                        "history": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/nodes/{$PVENODE}/qemu/{$PVEQEMUID}/status/current",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "2697dee24c244ecaa7db80a5fb6a1e26",
                        "name": "Disk size",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.maxdisk",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.maxdisk"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "e972242357e9467899014bededb1a55c",
                        "name": "Memory size",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.maxmem",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.maxmem"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "cd103325e3ba49da98e7146383878d0c",
                        "name": "Memory used",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.mem",
                        "delay": "0",
                        "units": "B",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.mem"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "ff026525c014421da9409aa0544880d2",
                        "name": "Memory free",
                        "type": "CALCULATED",
                        "key": "pveapi.qemu.memfree",
                        "units": "%",
                        "params": "100*((last(//pveapi.qemu.maxmem) - last(//pveapi.qemu.mem)) / last(//pveapi.qemu.maxmem))",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "ae737e66d8d24a7d80cbb73487eed3dc",
                        "name": "Pool check",
                        "type": "HTTP_AGENT",
                        "key": "pveapi.qemu.poolcheck",
                        "delay": "15m",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.poolid==\"{$PVEQEMUPOOL}\")].poolid.first()"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "__"
                            },
                            {
                                "type": "MATCHES_REGEX",
                                "parameters": [
                                    "{$PVENOPROBLEMPOOL}"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "1"
                            },
                            {
                                "type": "IN_RANGE",
                                "parameters": [
                                    "1",
                                    "2"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "0"
                            }
                        ],
                        "timeout": "10s",
                        "url": "https://{$PVESERVER}:8006/api2/json/pools",
                        "headers": [
                            {
                                "name": "Authorization",
                                "value": "PVEAPIToken={$PVETOKENID}={$PVESECRET}"
                            }
                        ],
                        "output_format": "JSON",
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "61a796b2d0bc43219c42d44860f49972",
                        "name": "Status",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.status",
                        "delay": "0",
                        "trends": "0",
                        "value_type": "TEXT",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.status"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    },
                    {
                        "uuid": "9d933a515fc84302a027f0d8c455f05a",
                        "name": "Uptime",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.uptime",
                        "delay": "0",
                        "units": "uptime",
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.uptime"
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "tags": [
                            {
                                "tag": "Application",
                                "value": "PVE Qemu"
                            }
                        ]
                    }
                ],
                "discovery_rules": [
                    {
                        "uuid": "78039a1467e445ab8f841abb373cf201",
                        "name": "pveapi qemu discovery blockdevice",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.discovery.blockdev",
                        "delay": "0",
                        "lifetime": "5d",
                        "description": "Discover blockdevices for qemu.\nThe preprocessing is pretty gross. Need to modify an array to items with names.",
                        "item_prototypes": [
                            {
                                "uuid": "48a5912cd74f4ca19e6438434e60c2e8",
                                "name": "{#PVEQEMUBLOCKDEV} read iops",
                                "type": "DEPENDENT",
                                "key": "pveapi.qemu.blockdev.readiops[{#PVEQEMUBLOCKDEV}]",
                                "delay": "0",
                                "units": "iops",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.blockstat.{#PVEQEMUBLOCKDEV}.rd_operations"
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    },
                                    {
                                        "type": "CHANGE_PER_SECOND",
                                        "parameters": [
                                            ""
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.qemu.master.status"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Qemu"
                                    }
                                ]
                            },
                            {
                                "uuid": "67c08312cab349baaee2c47aa7b439e1",
                                "name": "{#PVEQEMUBLOCKDEV} read",
                                "type": "DEPENDENT",
                                "key": "pveapi.qemu.blockdev.read[{#PVEQEMUBLOCKDEV}]",
                                "delay": "0",
                                "value_type": "FLOAT",
                                "units": "Bps",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.blockstat.{#PVEQEMUBLOCKDEV}.rd_bytes"
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    },
                                    {
                                        "type": "CHANGE_PER_SECOND",
                                        "parameters": [
                                            ""
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.qemu.master.status"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Qemu"
                                    }
                                ]
                            },
                            {
                                "uuid": "7333f77875c54ecab85661f72e3686a8",
                                "name": "{#PVEQEMUBLOCKDEV} write iops",
                                "type": "DEPENDENT",
                                "key": "pveapi.qemu.blockdev.writeiops[{#PVEQEMUBLOCKDEV}]",
                                "delay": "0",
                                "units": "iops",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.blockstat.{#PVEQEMUBLOCKDEV}.wr_operations"
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    },
                                    {
                                        "type": "CHANGE_PER_SECOND",
                                        "parameters": [
                                            ""
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.qemu.master.status"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Qemu"
                                    }
                                ]
                            },
                            {
                                "uuid": "ea700e8f9f6c4315956a9bb53ac250bb",
                                "name": "{#PVEQEMUBLOCKDEV} write",
                                "type": "DEPENDENT",
                                "key": "pveapi.qemu.blockdev.write[{#PVEQEMUBLOCKDEV}]",
                                "delay": "0",
                                "units": "Bps",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.blockstat.{#PVEQEMUBLOCKDEV}.wr_bytes"
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    },
                                    {
                                        "type": "CHANGE_PER_SECOND",
                                        "parameters": [
                                            ""
                                        ],
                                        "error_handler": "CUSTOM_VALUE",
                                        "error_handler_params": "0"
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.qemu.master.status"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Qemu"
                                    }
                                ]
                            }
                        ],
                        "graph_prototypes": [
                            {
                                "uuid": "d95a6e04ca7a45b096983f924b06fe0e",
                                "name": "{#PVEQEMUBLOCKDEV} iops",
                                "ymin_type_1": "FIXED",
                                "graph_items": [
                                    {
                                        "color": "2774A4",
                                        "item": {
                                            "host": "Template pve api qemu",
                                            "key": "pveapi.qemu.blockdev.readiops[{#PVEQEMUBLOCKDEV}]"
                                        }
                                    },
                                    {
                                        "sortorder": "1",
                                        "color": "F7941D",
                                        "item": {
                                            "host": "Template pve api qemu",
                                            "key": "pveapi.qemu.blockdev.writeiops[{#PVEQEMUBLOCKDEV}]"
                                        }
                                    }
                                ]
                            },
                            {
                                "uuid": "9f3ed030ed6b44b2b3bcce8ca93b3a51",
                                "name": "{#PVEQEMUBLOCKDEV} read/write",
                                "ymin_type_1": "FIXED",
                                "graph_items": [
                                    {
                                        "color": "199C0D",
                                        "item": {
                                            "host": "Template pve api qemu",
                                            "key": "pveapi.qemu.blockdev.read[{#PVEQEMUBLOCKDEV}]"
                                        }
                                    },
                                    {
                                        "sortorder": "1",
                                        "color": "F63100",
                                        "item": {
                                            "host": "Template pve api qemu",
                                            "key": "pveapi.qemu.blockdev.write[{#PVEQEMUBLOCKDEV}]"
                                        }
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVEQEMUBLOCKDEV}",
                                "path": "$.blockdev"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.blockstat[*]~"
                                ],
                                "error_handler": "CUSTOM_VALUE"
                            },
                            {
                                "type": "STR_REPLACE",
                                "parameters": [
                                    ",\"",
                                    "},{\"blockdev\":\""
                                ]
                            },
                            {
                                "type": "STR_REPLACE",
                                "parameters": [
                                    "[",
                                    "[{\"blockdev\":"
                                ]
                            },
                            {
                                "type": "STR_REPLACE",
                                "parameters": [
                                    "]",
                                    "}]"
                                ]
                            },
                            {
                                "type": "STR_REPLACE",
                                "parameters": [
                                    "blockdev\":}",
                                    "blockdev\":\"\"}"
                                ]
                            },
                            {
                                "type": "NOT_MATCHES_REGEX",
                                "parameters": [
                                    "^$"
                                ],
                                "error_handler": "CUSTOM_VALUE",
                                "error_handler_params": "[]"
                            }
                        ]
                    },
                    {
                        "uuid": "36a488e04b844f859ef0e11d1073b484",
                        "name": "pveapi qemu discovery nic",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.discovery.nic",
                        "delay": "0",
                        "lifetime": "5d",
                        "description": "Discover network interfaces for qemu.\nThe preprocessing is pretty gross. Need to modify an array to items with names.",
                        "item_prototypes": [
                            {
                                "uuid": "b7c1cade63774edb91784f6f664a0727",
                                "name": "{#PVEQEMUNIC} in",
                                "type": "DEPENDENT",
                                "key": "pveapi.qemu.nic.in[{#PVEQEMUNIC}]",
                                "delay": "0",
                                "units": "bps",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.nics.{#PVEQEMUNIC}.netin"
                                        ],
                                        "error_handler": "DISCARD_VALUE"
                                    },
                                    {
                                        "type": "MULTIPLIER",
                                        "parameters": [
                                            "8"
                                        ]
                                    },
                                    {
                                        "type": "CHANGE_PER_SECOND",
                                        "parameters": [
                                            ""
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.qemu.master.status"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Qemu"
                                    }
                                ]
                            },
                            {
                                "uuid": "9ac8279b6ab744779ee01a627e17d0c4",
                                "name": "{#PVEQEMUNIC} out",
                                "type": "DEPENDENT",
                                "key": "pveapi.qemu.nic.out[{#PVEQEMUNIC}]",
                                "delay": "0",
                                "units": "bps",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data.nics.{#PVEQEMUNIC}.netout"
                                        ],
                                        "error_handler": "DISCARD_VALUE"
                                    },
                                    {
                                        "type": "MULTIPLIER",
                                        "parameters": [
                                            "8"
                                        ]
                                    },
                                    {
                                        "type": "CHANGE_PER_SECOND",
                                        "parameters": [
                                            ""
                                        ]
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.qemu.master.status"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Qemu"
                                    }
                                ]
                            }
                        ],
                        "graph_prototypes": [
                            {
                                "uuid": "11690e98c47947608465c1f3693318bc",
                                "name": "{#PVEQEMUNIC} traffic",
                                "ymin_type_1": "FIXED",
                                "graph_items": [
                                    {
                                        "color": "199C0D",
                                        "item": {
                                            "host": "Template pve api qemu",
                                            "key": "pveapi.qemu.nic.in[{#PVEQEMUNIC}]"
                                        }
                                    },
                                    {
                                        "sortorder": "1",
                                        "color": "F63100",
                                        "item": {
                                            "host": "Template pve api qemu",
                                            "key": "pveapi.qemu.nic.out[{#PVEQEMUNIC}]"
                                        }
                                    }
                                ]
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.status"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVEQEMUNIC}",
                                "path": "$.nic"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data.nics[*]~"
                                ],
                                "error_handler": "DISCARD_VALUE"
                            },
                            {
                                "type": "STR_REPLACE",
                                "parameters": [
                                    ",\"",
                                    "},{\"nic\":\""
                                ]
                            },
                            {
                                "type": "STR_REPLACE",
                                "parameters": [
                                    "[",
                                    "[{\"nic\":"
                                ]
                            },
                            {
                                "type": "STR_REPLACE",
                                "parameters": [
                                    "]",
                                    "}]"
                                ]
                            }
                        ]
                    },
                    {
                        "uuid": "de4c8257d1b84a3fb3a8654185e99788",
                        "name": "pveapi qemu discovery snapshot",
                        "type": "DEPENDENT",
                        "key": "pveapi.qemu.discovery.snapshot",
                        "delay": "0",
                        "lifetime": "1h",
                        "description": "Discover snapshots for qemu.",
                        "item_prototypes": [
                            {
                                "uuid": "492ae5de5a9341ff81c1cfa1e8db29c1",
                                "name": "Snapshot {#PVEQEMUSNAPSHOT} check",
                                "type": "DEPENDENT",
                                "key": "pveapi.qemu.snapshot.check[{#PVEQEMUSNAPSHOT}]",
                                "delay": "0",
                                "history": "1h",
                                "trends": "0",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data[?(@.name==\"{#PVEQEMUSNAPSHOT}\" && ! (@.name =~ \"^{$PVESNAPSHOTEXCLUDE}\"))].length()"
                                        ],
                                        "error_handler": "DISCARD_VALUE"
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.qemu.master.snapshot"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Qemu"
                                    }
                                ]
                            },
                            {
                                "uuid": "615051719a2c41c9ae77ef7c07f14579",
                                "name": "Snapshot {#PVEQEMUSNAPSHOT} create time",
                                "type": "DEPENDENT",
                                "key": "pveapi.qemu.snapshot.time[{#PVEQEMUSNAPSHOT}]",
                                "delay": "0",
                                "history": "1h",
                                "trends": "0",
                                "units": "unixtime",
                                "preprocessing": [
                                    {
                                        "type": "JSONPATH",
                                        "parameters": [
                                            "$.body.data[?(@.name==\"{#PVEQEMUSNAPSHOT}\")].snaptime.first()"
                                        ],
                                        "error_handler": "DISCARD_VALUE"
                                    }
                                ],
                                "master_item": {
                                    "key": "pveapi.qemu.master.snapshot"
                                },
                                "tags": [
                                    {
                                        "tag": "Application",
                                        "value": "PVE Qemu"
                                    }
                                ]
                            }
                        ],
                        "trigger_prototypes": [
                            {
                                "uuid": "ba6e363ea9d2435cbac52f3deed54583",
                                "expression": "now()-\nlast(/Template pve api qemu/pveapi.qemu.snapshot.time[{#PVEQEMUSNAPSHOT}])>{$PVESNAPSHOTAGE} and last(/Template pve api qemu/pveapi.qemu.snapshot.check[{#PVEQEMUSNAPSHOT}])=1",
                                "name": "{$PVEQEMUNAME} snapshot {#PVEQEMUSNAPSHOT} too old",
                                "priority": "WARNING",
                                "manual_close": "YES"
                            }
                        ],
                        "master_item": {
                            "key": "pveapi.qemu.master.snapshot"
                        },
                        "lld_macro_paths": [
                            {
                                "lld_macro": "{#PVEQEMUSNAPSHOT}",
                                "path": "$.name"
                            }
                        ],
                        "preprocessing": [
                            {
                                "type": "JSONPATH",
                                "parameters": [
                                    "$.body.data[?(@.name!=\"current\")]"
                                ],
                                "error_handler": "DISCARD_VALUE"
                            }
                        ]
                    }
                ],
                "dashboards": [
                    {
                        "uuid": "d6d7baf27a704d6e8e2af41ab520c37a",
                        "name": "Qemu overview",
                        "pages": [
                            {
                                "widgets": [
                                    {
                                        "type": "PLAIN_TEXT",
                                        "width": "8",
                                        "fields": [
                                            {
                                                "type": "ITEM",
                                                "name": "itemids",
                                                "value": {
                                                    "host": "Template pve api qemu",
                                                    "key": "pveapi.qemu.status"
                                                }
                                            },
                                            {
                                                "type": "INTEGER",
                                                "name": "show_lines",
                                                "value": "1"
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "y": "2",
                                        "width": "8",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api qemu",
                                                    "name": "CPU ({?last(//pveapi.qemu.cpus)} CPU(s))"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "y": "7",
                                        "width": "8",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api qemu",
                                                    "name": "{#PVEQEMUNIC} traffic"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "x": "8",
                                        "y": "2",
                                        "width": "8",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api qemu",
                                                    "name": "Memory usage"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "x": "8",
                                        "y": "7",
                                        "width": "8",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api qemu",
                                                    "name": "{#PVEQEMUBLOCKDEV} read/write"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_CLASSIC",
                                        "x": "16",
                                        "y": "2",
                                        "width": "8",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "GRAPH",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api qemu",
                                                    "name": "Uptime"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "type": "GRAPH_PROTOTYPE",
                                        "x": "16",
                                        "y": "7",
                                        "width": "8",
                                        "height": "5",
                                        "fields": [
                                            {
                                                "type": "INTEGER",
                                                "name": "columns",
                                                "value": "1"
                                            },
                                            {
                                                "type": "GRAPH_PROTOTYPE",
                                                "name": "graphid",
                                                "value": {
                                                    "host": "Template pve api qemu",
                                                    "name": "{#PVEQEMUBLOCKDEV} iops"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                "uuid": "3c6064fc2835496ab65ef99890193928",
                "template": "Template pve api settings",
                "name": "Template pve api settings",
                "description": "This template only contains configuration macro's with default values.",
                "groups": [
                    {
                        "name": "Production"
                    },
                    {
                        "name": "Templates"
                    }
                ],
                "macros": [
                    {
                        "macro": "{$PVELOCKTIME}",
                        "value": "2h",
                        "description": "Alert if lxc or qemu is locked for this long"
                    },
                    {
                        "macro": "{$PVENOPROBLEMPOOL}",
                        "value": "^test$",
                        "description": "Systems in pools matching this regex will not generate problems"
                    },
                    {
                        "macro": "{$PVESNAPSHOTAGE}",
                        "value": "1w",
                        "description": "Alert if snapshots older than 1 week (default)"
                    },
                    {
                        "macro": "{$PVESNAPSHOTEXCLUDE}",
                        "value": "test",
                        "description": "Ignore snapshots starting with this text"
                    },
                    {
                        "macro": "{$PVETASKTIME}",
                        "value": "86400",
                        "description": "Alert if tasks fail between now and value seconds ago"
                    }
                ]
            }
        ],
        "triggers": [
            {
                "uuid": "28fceca8f438401cb5e766e2f08ee296",
                "expression": "avg(/Template pve api lxc/pveapi.lxc.cpu,15m)>80 and last(/Template pve api lxc/pveapi.lxc.poolcheck)=1",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "avg(/Template pve api lxc/pveapi.lxc.cpu,15m)<70",
                "name": "CPU over 80% for last 15 minutes on {$PVELXCNAME}",
                "priority": "WARNING",
                "description": "{$PVELXCNAME} has more then 80% CPU usage over the last 15 minutes",
                "manual_close": "YES"
            },
            {
                "uuid": "054dc8555f5d4112b2bcd0357b4b8726",
                "expression": "(avg(/Template pve api node/pveapi.node.cpu.user,15m) + avg(/Template pve api node/pveapi.node.cpu.wait,15m)) > 80",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "(avg(/Template pve api node/pveapi.node.cpu.user,15m) + avg(/Template pve api node/pveapi.node.cpu.wait,15m)) < 70",
                "name": "CPU over 80% for last 15 minutes on {$PVENODE}",
                "priority": "WARNING",
                "description": "{$PVENODE} has more then 80% CPU usage over the last 15 minutes",
                "manual_close": "YES"
            },
            {
                "uuid": "be8f355436334ef08dd5d049ea0811b1",
                "expression": "avg(/Template pve api qemu/pveapi.qemu.cpu,15m)>80 and last(/Template pve api qemu/pveapi.qemu.poolcheck)=1",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "avg(/Template pve api qemu/pveapi.qemu.cpu,15m)<70",
                "name": "CPU over 80% for last 15 minutes on {$PVEQEMUNAME}",
                "priority": "WARNING",
                "description": "{$PVEQEMUNAME} has more then 80% CPU usage over the last 15 minutes",
                "manual_close": "YES"
            },
            {
                "uuid": "6f33c9431fb64dfca9116494c61dc1ff",
                "expression": "avg(/Template pve api lxc/pveapi.lxc.diskfree,10m)<1 and last(/Template pve api lxc/pveapi.lxc.poolcheck)=1",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "avg(/Template pve api lxc/pveapi.lxc.diskfree,10m)>3",
                "name": "Disk full on {$PVELXCNAME}",
                "priority": "DISASTER",
                "description": "{$PVELXCNAME} has no diskspace left over the last 10 minutes.",
                "manual_close": "YES"
            },
            {
                "uuid": "464011111d7f4b07aed59fa16e169bbf",
                "expression": "avg(/Template pve api lxc/pveapi.lxc.diskfree,10m)<5 and last(/Template pve api lxc/pveapi.lxc.poolcheck)=1",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "avg(/Template pve api lxc/pveapi.lxc.diskfree,10m)>7",
                "name": "Disk less than 5% free on {$PVELXCNAME}",
                "priority": "HIGH",
                "description": "{$PVELXCNAME} has less then 5% diskspace free over the last 10 minutes.",
                "manual_close": "YES"
            },
            {
                "uuid": "c821468ee95a4957beebb8f72b2666e5",
                "expression": "avg(/Template pve api lxc/pveapi.lxc.diskfree,10m)<10 and\navg(/Template pve api lxc/pveapi.lxc.diskfree,10m)>5 and last(/Template pve api lxc/pveapi.lxc.poolcheck)=1",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "avg(/Template pve api lxc/pveapi.lxc.diskfree,10m)>15",
                "name": "Disk less than 10% free on {$PVELXCNAME}",
                "priority": "WARNING",
                "description": "{$PVELXCNAME} has less then 10% diskspace free over the last 10 minutes.",
                "manual_close": "YES"
            },
            {
                "uuid": "7a44e7643758414895b00c12d6a7bd97",
                "expression": "avg(/Template pve api lxc/pveapi.lxc.memfree,10m)<5 and last(/Template pve api lxc/pveapi.lxc.poolcheck)=1",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "avg(/Template pve api lxc/pveapi.lxc.memfree,10m)>10",
                "name": "Memory less than 5% free on {$PVELXCNAME}",
                "priority": "WARNING",
                "description": "{$PVELXCNAME} has less then 5% memory + swap free over the last 10 minutes.",
                "manual_close": "YES"
            },
            {
                "uuid": "a8c1d3abe6c34a0daabf662638053df9",
                "expression": "(100*(avg(/Template pve api node/pveapi.node.mem.used,10m)/avg(/Template pve api node/pveapi.node.mem.total,10m))) > 95",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "(100*(avg(/Template pve api node/pveapi.node.mem.used,10m)/avg(/Template pve api node/pveapi.node.mem.total,10m))) < 80",
                "name": "Memory less than 5% free on {$PVENODE}",
                "priority": "WARNING",
                "description": "{$PVENODE} has less then 5% memory + swap free over the last 10 minutes.",
                "manual_close": "YES"
            },
            {
                "uuid": "ebf09145336644448ee560e8c4036c54",
                "expression": "avg(/Template pve api qemu/pveapi.qemu.memfree,10m)<5 and last(/Template pve api qemu/pveapi.qemu.poolcheck)=1",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "avg(/Template pve api qemu/pveapi.qemu.memfree,10m)>10",
                "name": "Memory less than 5% free on {$PVEQEMUNAME}",
                "priority": "WARNING",
                "description": "{$PVEQEMUNAME} has less then 5% memory free over the last 10 minutes.",
                "manual_close": "YES"
            },
            {
                "uuid": "4d54c5672bea4abebe549a8d233afac6",
                "expression": "(100* (avg(/Template pve api node/pveapi.node.rootfs.used,10m) / avg(/Template pve api node/pveapi.node.rootfs.total,10m))) > 90",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "(100* (avg(/Template pve api node/pveapi.node.rootfs.used,10m) / avg(/Template pve api node/pveapi.node.rootfs.total,10m))) < 80",
                "name": "RootFS has less than 10% free on {$PVENODE}",
                "priority": "WARNING",
                "description": "{$PVENODE} has less then 10% diskspace free over the last 10 minutes",
                "manual_close": "YES"
            },
            {
                "uuid": "ceeccc264de443d79832172ed6bf683b",
                "expression": "(100*(avg(/Template pve api node/pveapi.node.swap.used,10m)/avg(/Template pve api node/pveapi.node.swap.total,10m))) > 50",
                "recovery_mode": "RECOVERY_EXPRESSION",
                "recovery_expression": "(100*(avg(/Template pve api node/pveapi.node.swap.used,10m)/avg(/Template pve api node/pveapi.node.swap.total,10m))) < 40",
                "name": "Swap more than 50% used on {$PVENODE}",
                "priority": "WARNING",
                "description": "{$PVENODE} has less then 5% memory + swap free over the last 10 minutes.",
                "manual_close": "YES"
            },
            {
                "uuid": "c79d48b2f7c04454a39c2a4950ba8e21",
                "expression": "(count(/Template pve api lxc/pveapi.lxc.lock,{$PVELOCKTIME}) =  count(/Template pve api lxc/pveapi.lxc.lock,{$PVELOCKTIME},\"ne\",\"\")) and last(/Template pve api lxc/pveapi.lxc.poolcheck)=1",
                "name": "{$PVELXCNAME} is locked: {ITEM.LASTVALUE1}",
                "priority": "AVERAGE",
                "description": "{$PVELXCNAME} is stopped.",
                "manual_close": "YES"
            },
            {
                "uuid": "03937bcc04b84ae7b9285887c290991b",
                "expression": "change(/Template pve api lxc/pveapi.lxc.uptime)<0 and find(/Template pve api lxc/pveapi.lxc.status,,\"regexp\",\"running\")=1 and last(/Template pve api lxc/pveapi.lxc.poolcheck)=1",
                "name": "{$PVELXCNAME} is restarted",
                "priority": "INFO",
                "description": "{$PVELXCNAME} restarted",
                "manual_close": "YES"
            },
            {
                "uuid": "cafb6176baca41e5b40d7840e70d5b77",
                "expression": "find(/Template pve api lxc/pveapi.lxc.status,,\"regexp\",\"stopped\")=1 and last(/Template pve api lxc/pveapi.lxc.poolcheck)=1",
                "name": "{$PVELXCNAME} is stopped",
                "priority": "WARNING",
                "description": "{$PVELXCNAME} is stopped.",
                "manual_close": "YES"
            },
            {
                "uuid": "3162a28e319c4c71a233a3da6bbc3a69",
                "expression": "change(/Template pve api qemu/pveapi.qemu.uptime)<0 and last(/Template pve api qemu/pveapi.qemu.poolcheck)=1",
                "name": "{$PVEQEMUNAME} is restarted",
                "priority": "INFO",
                "description": "{$PVEQEMUNAME} restarted",
                "manual_close": "YES"
            },
            {
                "uuid": "d3291775d6d34716b045d6eb0564bff9",
                "expression": "find(/Template pve api qemu/pveapi.qemu.status,,\"regexp\",\"stopped\")=1 and last(/Template pve api qemu/pveapi.qemu.poolcheck)=1",
                "name": "{$PVEQEMUNAME} is stopped",
                "priority": "WARNING",
                "description": "{$PVEQEMUNAME} is stopped.",
                "manual_close": "YES"
            }
        ],
        "graphs": [
            {
                "uuid": "17711dcdd56d4776825ba0785f7b71f9",
                "name": "Cluster status",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "ITEM",
                "ymax_item_1": {
                    "host": "Template pve api datacenter",
                    "key": "pveapi.datacenter.clusternodes"
                },
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api datacenter",
                            "key": "pveapi.datacenter.clusternodesonline"
                        }
                    }
                ]
            },
            {
                "uuid": "5b4dc88108884e82a8c5673610a6514c",
                "name": "Cluster tasks",
                "ymin_type_1": "FIXED",
                "graph_items": [
                    {
                        "sortorder": "1",
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api datacenter",
                            "key": "pveapi.datacenter.tasks.failed"
                        }
                    },
                    {
                        "sortorder": "2",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api datacenter",
                            "key": "pveapi.datacenter.tasks.running"
                        }
                    },
                    {
                        "sortorder": "3",
                        "color": "2774A4",
                        "item": {
                            "host": "Template pve api datacenter",
                            "key": "pveapi.datacenter.tasks.total"
                        }
                    }
                ]
            },
            {
                "uuid": "ed4c6e14170240f982a6bb51dc4d3f54",
                "name": "CPU",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "FIXED",
                "graph_items": [
                    {
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.cpu"
                        }
                    }
                ]
            },
            {
                "uuid": "5ce7f0383dd943f882dd227e15b19434",
                "name": "CPU ({?last(//pveapi.node.cpus)} CPU(s))",
                "type": "STACKED",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "FIXED",
                "graph_items": [
                    {
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api node",
                            "key": "pveapi.node.cpu.wait"
                        }
                    },
                    {
                        "sortorder": "1",
                        "color": "FFBF00",
                        "item": {
                            "host": "Template pve api node",
                            "key": "pveapi.node.cpu.user"
                        }
                    }
                ]
            },
            {
                "uuid": "2756efd0d0804c68887e40ef8cf11124",
                "name": "CPU ({?last(//pveapi.qemu.cpus)} CPU(s))",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "FIXED",
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api qemu",
                            "key": "pveapi.qemu.cpu"
                        }
                    }
                ]
            },
            {
                "uuid": "30a295a98e894914b7f579207867aa51",
                "name": "Disk IO",
                "ymin_type_1": "FIXED",
                "graph_items": [
                    {
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.diskread"
                        }
                    },
                    {
                        "sortorder": "1",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.diskwrite"
                        }
                    }
                ]
            },
            {
                "uuid": "209c30c754c4470fa373ec4a566db1ff",
                "name": "Disk usage",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "ITEM",
                "ymax_item_1": {
                    "host": "Template pve api lxc",
                    "key": "pveapi.lxc.maxdisk"
                },
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "33FF33",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.maxdisk"
                        }
                    },
                    {
                        "sortorder": "1",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.disk"
                        }
                    }
                ]
            },
            {
                "uuid": "da065cb1c74645afa448db54e843c85c",
                "name": "KSM",
                "ymin_type_1": "FIXED",
                "graph_items": [
                    {
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api node",
                            "key": "pveapi.node.ksm"
                        }
                    }
                ]
            },
            {
                "uuid": "48e6d5c9d3ba4c4a98ad6b4799f4fae4",
                "name": "Load average",
                "ymin_type_1": "FIXED",
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api node",
                            "key": "pveapi.node.load"
                        }
                    }
                ]
            },
            {
                "uuid": "93e4946986954138a9937b4a49513eb5",
                "name": "Memory ({?last(//pveapi.node.mem.total)})",
                "type": "STACKED",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "ITEM",
                "ymax_item_1": {
                    "host": "Template pve api node",
                    "key": "pveapi.node.mem.total"
                },
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api node",
                            "key": "pveapi.node.mem.used"
                        }
                    }
                ]
            },
            {
                "uuid": "4ebd16aeb4204082afb4027a42486abf",
                "name": "Memory usage",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "ITEM",
                "ymax_item_1": {
                    "host": "Template pve api lxc",
                    "key": "pveapi.lxc.maxmem"
                },
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "33FF33",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.maxmem"
                        }
                    },
                    {
                        "sortorder": "1",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.mem"
                        }
                    }
                ]
            },
            {
                "uuid": "3c1a73e6210940dbb5018b50f3e2f79c",
                "name": "Memory usage",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "ITEM",
                "ymax_item_1": {
                    "host": "Template pve api qemu",
                    "key": "pveapi.qemu.maxmem"
                },
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "33FF33",
                        "item": {
                            "host": "Template pve api qemu",
                            "key": "pveapi.qemu.maxmem"
                        }
                    },
                    {
                        "sortorder": "1",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api qemu",
                            "key": "pveapi.qemu.mem"
                        }
                    }
                ]
            },
            {
                "uuid": "6b02387e5dc949919744d8d933545aa9",
                "name": "Network traffic",
                "ymin_type_1": "FIXED",
                "graph_items": [
                    {
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.netin"
                        }
                    },
                    {
                        "sortorder": "1",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.netout"
                        }
                    }
                ]
            },
            {
                "uuid": "9745339a53d14b999368f586bb0a15e7",
                "name": "Root filesystem ({?last(//pveapi.node.rootfs.total)})",
                "show_triggers": "NO",
                "type": "STACKED",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "ITEM",
                "ymax_item_1": {
                    "host": "Template pve api node",
                    "key": "pveapi.node.rootfs.total"
                },
                "graph_items": [
                    {
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api node",
                            "key": "pveapi.node.rootfs.used"
                        }
                    }
                ]
            },
            {
                "uuid": "2df757218b1142dc9430899652310901",
                "name": "Swap ({?last(//pveapi.node.swap.total)})",
                "type": "STACKED",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "ITEM",
                "ymax_item_1": {
                    "host": "Template pve api node",
                    "key": "pveapi.node.swap.total"
                },
                "graph_items": [
                    {
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api node",
                            "key": "pveapi.node.swap.used"
                        }
                    }
                ]
            },
            {
                "uuid": "5c2cbb4994c14e7b99b7428a9f094b92",
                "name": "Swap usage",
                "ymin_type_1": "FIXED",
                "ymax_type_1": "ITEM",
                "ymax_item_1": {
                    "host": "Template pve api lxc",
                    "key": "pveapi.lxc.maxswap"
                },
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "33FF33",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.maxswap"
                        }
                    },
                    {
                        "sortorder": "1",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.swap"
                        }
                    }
                ]
            },
            {
                "uuid": "a5dc864387ec40e5b4a1946ac9b7d1af",
                "name": "Uptime",
                "show_work_period": "NO",
                "ymin_type_1": "FIXED",
                "graph_items": [
                    {
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api lxc",
                            "key": "pveapi.lxc.uptime"
                        }
                    }
                ]
            },
            {
                "uuid": "d4eaf88662584c3088570b86b74b2f00",
                "name": "Uptime",
                "ymin_type_1": "FIXED",
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "F63100",
                        "item": {
                            "host": "Template pve api node",
                            "key": "pveapi.node.uptime"
                        }
                    }
                ]
            },
            {
                "uuid": "cb7ad77697d641c9b4f4d4ae65932014",
                "name": "Uptime",
                "ymin_type_1": "FIXED",
                "graph_items": [
                    {
                        "drawtype": "FILLED_REGION",
                        "color": "199C0D",
                        "item": {
                            "host": "Template pve api qemu",
                            "key": "pveapi.qemu.uptime"
                        }
                    }
                ]
            }
        ]
    }
}